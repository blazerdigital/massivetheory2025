<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merch Store</title>
    <link rel="stylesheet" href="/css/globals.css">
    <link rel="stylesheet" href="/css/merch.css">
    <link rel="stylesheet" href="/css/Navbar.module.css">
    <link rel="stylesheet" href="/css/Footer.module.css">
    <style>
        .active {
            color: #FFD700;
        }
        body, html {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
        }
        .content {
            flex: 1;
            margin-top: 120px; /* Adjust this to match the height of your fixed header */
            max-width: 1199px;
            margin-left: auto;
            margin-right: auto;
            padding-left: 50px; /* Optional: Add padding for better content spacing */
            padding-right: 50px; /* Optional: Add padding for better content spacing */
            box-sizing: border-box; /* Ensure padding doesn't affect the width */
            position: relative; /* Ensure the loading overlay is positioned correctly */
        }
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px; /* Space between header and line */
            border-bottom: 2px solid lightgray; /* Light gray line */
            padding-bottom: 10px; /* Space between line and store content */
        }
        .header-section h1 {
            margin: 0;
        }
        .header-section .ec-cart-widget {
            margin: 0;
            padding-right: 50px;
        }
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .loading-overlay p {
            font-size: 1em;
            color: #28313b;;
            text-align: center;
        }
    </style>
</head>
<body class="body-merch-page">
    <!-- Navbar HTML here -->
    <header class="wrapper">
        <div class="header container">
            <a href="/" class="navItem logoContainer">
                <img src="/images/logo.svg" alt="Logo" class="logo">
            </a>
            <div class="navItems">
                <a href="/" class="navItem">HOME</a>
                <a href="/allepisodes" class="navItem">EPISODES</a>
                <a href="/support" class="navItem">SUPPORT</a>
                <a href="/contact" class="navItem">CONTACT</a>
                <a href="/merch/" class="navItem active">MERCH</a>
            </div>
            <div class="socialContainer">
                <a href="#" target="_blank" rel="noreferrer">
                    <img src="/images/youtube.png" alt="YouTube" class="socialLogo">
                </a>
                <a href="#" target="_blank" rel="noreferrer">
                    <img src="/images/rumble.png" alt="Rumble" class="socialLogo">
                </a>
                <a href="#" target="_blank" rel="noreferrer">
                    <img src="/images/odysee.png" alt="Odysee" class="socialLogo">
                </a>
            </div>
        </div>
    </header>

    <div class="content">
        <div id="loading-overlay" class="loading-overlay">
            <p>Loading...</p>
        </div>
        <div class="header-section">
            <h1>Merch Store</h1>
            <div class="ec-cart-widget"></div>
        </div>
        <div id="my-store-66578708"></div>
        <div id="fallback-message" style="display:none;">
            <p>Sorry, our store is currently unavailable. Please try again later.</p>
            <!-- Add any additional fallback content here -->
        </div>
        <div>
            <script data-cfasync="false" type="text/javascript" src="https://app.ecwid.com/script.js?66578708&data_platform=code&data_date=2024-07-06" charset="utf-8"></script>
            <script type="text/javascript">
                document.addEventListener("DOMContentLoaded", function() {
                    function checkEcwidStatus() {
                        const script = document.createElement('script');
                        script.src = 'https://app.ecwid.com/script.js?66578708&data_platform=code&data_date=2024-07-06';
                        script.async = true;
                        script.charset = 'utf-8';
                        script.onload = function() {
                            try {
                                window.xProductBrowser("categoriesPerRow=3","views=grid(20,3) list(60) table(60)","categoryView=grid","searchView=list","id=my-store-66578708");
                                window.Ecwid.init();
                                setTimeout(() => {
                                    document.getElementById('loading-overlay').style.display = 'none'; // Hide loading overlay
                                }, 500); // Adjust the delay as needed
                            } catch (error) {
                                document.getElementById('fallback-message').style.display = 'block';
                                document.getElementById('my-store-66578708').style.display = 'none';
                                document.getElementById('loading-overlay').style.display = 'none'; // Hide loading overlay
                            }
                        };
                        script.onerror = function() {
                            document.getElementById('fallback-message').style.display = 'block';
                            document.getElementById('my-store-66578708').style.display = 'none';
                            document.getElementById('loading-overlay').style.display = 'none'; // Hide loading overlay
                        };
                        document.body.appendChild(script);
                    }

                    checkEcwidStatus();
                });
            </script>
        </div>
        <div class="badge-container">
            <img src="/images/EcwidBrand.png" alt="Powered by Ecwid">
            <img src="/images/PrintfulBrand.png" alt="Fulfilled by Printful">
        </div>
    </div>

    <!-- Footer HTML here -->
    <footer class="footer-wrapper">
        <div class="container">
            <p class="text">Â© 2024 Massive Theory. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Add Ecwid cart script -->
    <script type="text/javascript">
        var ecwid_cart_script = document.createElement('script');
        ecwid_cart_script.setAttribute('data-cfasync', 'false');
        ecwid_cart_script.setAttribute('type', 'text/javascript');
        ecwid_cart_script.setAttribute('src', 'https://app.ecwid.com/script.js?66578708&data_platform=code&data_date=2024-07-06');
        ecwid_cart_script.setAttribute('charset', 'utf-8');
        document.body.appendChild(ecwid_cart_script);

        ecwid_cart_script.onload = function() {
            Ecwid.init();
            setTimeout(() => {
                document.getElementById('loading-overlay').style.display = 'none'; // Hide loading overlay
            }, 400); // Adjust the delay as needed
        };
    </script>
</body>
</html>
