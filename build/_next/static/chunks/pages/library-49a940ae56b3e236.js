(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{527:function(e,a,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/library",function(){return o(6598)}])},6598:function(e,a,o){"use strict";o.r(a);var s=o(5893),i=o(7294),n=o(1664),l=o.n(n),t=o(7066);o(4625);let r="http://10.0.1.48:1337/api/library-items?populate=*&pagination[limit]=100",d="http://10.0.1.48:1337/api/episodes?fields=order,Title,thumb";a.default=()=>{let[e,a]=(0,i.useState)([]),[o,n]=(0,i.useState)([]),[c,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(1);if((0,i.useEffect)(()=>{(async function(){try{var e,o,s,i;console.log("Fetching data from API:",r,d);let[l,c]=await Promise.all([t.Z.get(r,{timeout:5e3}),t.Z.get(d,{timeout:5e3})]);console.log("\uD83D\uDD0D Library API Response:",l.data),console.log("\uD83D\uDD0D Episodes API Response:",c.data),(null===(o=l.data)||void 0===o?void 0:null===(e=o.data)||void 0===e?void 0:e.length)>0?a(l.data.data):console.warn("⚠️ No books found."),(null===(i=c.data)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.length)>0?n(c.data.data):console.warn("⚠️ No episodes found.")}catch(e){console.error("❌ Error fetching data:",e),u(e.message)}})()},[]),c)return(0,s.jsxs)("p",{children:["Error loading library: ",c]});let b=e.reduce((e,a)=>{let s=a.attributes||a,i=void 0!==s.order?s.order:"Unknown",n=null==o?void 0:o.find(e=>Number(null==e?void 0:e.order)===Number(i)),l="EP".concat(i),t=(null==n?void 0:n.Title)||"Episode ".concat(i),r=(null==n?void 0:n.thumb)||"/images/fallback-thumbnail.jpg";return e[l]||(e[l]={books:[],episodeTitle:t,episodeThumb:r}),e[l].books.push(s),e},{});console.log("\uD83D\uDCCC Grouped Books Debug:",JSON.stringify(b,null,2));let h=Object.entries(b).sort((e,a)=>{let[o]=e,[s]=a,i=Number(o.replace("EP",""));return Number(s.replace("EP",""))-i}),g=Math.ceil(h.length/2),f=h.slice((m-1)*2,2*m);return(0,s.jsxs)("div",{className:"library-container",children:[(0,s.jsx)("h1",{className:"title",children:"Library"}),(0,s.jsx)("p",{className:"library-description",children:"Explore a collection of books and media categorized by episodes. Click on any book for more details or purchase options."}),f.length>0?f.map(e=>{let[a,o]=e;return(0,s.jsxs)("div",{className:"episode-section",children:[(0,s.jsxs)("div",{className:"episode-header",children:[(0,s.jsx)("img",{src:o.episodeThumb,alt:o.episodeTitle,className:"episode-thumbnail"}),(0,s.jsx)("h2",{className:"episode-title",children:o.episodeTitle})]}),(0,s.jsx)("div",{className:"booksGrid",children:o.books.map(e=>(0,s.jsxs)("div",{className:"bookCard",children:[(0,s.jsx)(l(),{href:"/library/".concat(e.slug),passHref:!0,children:(0,s.jsx)("img",{src:e.cover_image,alt:"Book Cover",className:"book-image"})}),e.amazon_link&&(0,s.jsx)("a",{href:e.amazon_link,target:"_blank",rel:"noopener noreferrer",className:"buy-button",children:(0,s.jsx)("img",{src:"/images/amazonbuy.png",alt:"Buy on Amazon",className:"amazon-buy-img"})})]},e.id))})]},a)}):(0,s.jsx)("p",{children:"Loading books..."}),(0,s.jsxs)("div",{className:"pagination",children:[(0,s.jsx)("button",{onClick:()=>{m>1&&p(m-1)},disabled:1===m,className:"pagination-btn",children:"← Previous"}),(0,s.jsxs)("span",{className:"page-info",children:["Page ",m," of ",g]}),(0,s.jsx)("button",{onClick:()=>{m<g&&p(m+1)},disabled:m===g,className:"pagination-btn",children:"Next →"})]})]})}},4625:function(){}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=527)}),_N_E=e.O()}]);